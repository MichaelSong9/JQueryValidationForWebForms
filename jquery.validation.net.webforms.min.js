(function ($) { $.extend($.fn, { validateWebForm: function (options) { var form = $(this[0]), formExists = (form.length) && form.is('form'); if (formExists) { if (!options) { options = {}; } options.onsubmit = false; this.validate(options); $('.form :text').keydown(function (event) { if (event.keyCode == 13) { $(event.currentTarget).closest(".form").find(".submit").click(); return false; } }); form.getSumbitControls().click(this.validateAndSubmit); return this; } return undefined; }, getSumbitControls: function () { return $(this).find('.form .submit'); }, getValidationContainer: function (submitControl) { return $(submitControl).closest('.form'); }, validateAndSubmit: function (event) { var group = $(this).getValidationContainer(event.currentTarget), isValid = true; group.find(':input').each(function (i, item) { if (!$(item).valid()) { if ($("form").validate().settings.focusInvalid && isValid) $(item).focus(); isValid = false; } }); if (!isValid) { event.preventDefault(); } } }); })(jQuery);